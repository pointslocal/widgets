function arrChunk(e,t){var l,i,s,a=t,o=[];for(l=0,i=e.length;l<i;l+=a)s=e.slice(l,l+a),o.push(s);return o}!function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){var t=Object.prototype.toString,l=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test;var c=/\S/;function n(e){return t=c,l=e,!o.call(t,l);var t,l}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var p=/\s*/,d=/\s+/,h=/\s*=/,m=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;function u(e){this.string=e,this.tail=e,this.pos=0}function w(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function f(){this.cache={}}u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var l=t[0];return this.tail=this.tail.substring(l.length),this.pos+=l.length,l},u.prototype.scanUntil=function(e){var t,l=this.tail.search(e);switch(l){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,l),this.tail=this.tail.substring(l)}return this.pos+=t.length,t},w.prototype.push=function(e){return new w(e,this)},w.prototype.lookup=function(e){var t,l=this.cache;if(l.hasOwnProperty(e))t=l[e];else{for(var s,o,c=this,n=!1;c;){if(e.indexOf(".")>0)for(t=c.view,s=e.split("."),o=0;null!=t&&o<s.length;)o===s.length-1&&(n=a(t,s[o])),t=t[s[o++]];else t=c.view[e],n=a(c.view,e);if(n)break;c=c.parent}l[e]=t}return i(t)&&(t=t.call(this.view)),t},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(t,i){var a=this.cache,o=a[t];return null==o&&(o=a[t]=function(t,i){if(!t)return[];var a,o,c,r=[],w=[],f=[],g=!1,b=!1;function k(){if(g&&!b)for(;f.length;)delete w[f.pop()];else f=[];g=!1,b=!1}function y(e){if("string"==typeof e&&(e=e.split(d,2)),!l(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(s(e[0])+"\\s*"),o=new RegExp("\\s*"+s(e[1])),c=new RegExp("\\s*"+s("}"+e[1]))}y(i||e.tags);for(var x,_,q,S,$,P,R=new u(t);!R.eos();){if(x=R.pos,q=R.scanUntil(a))for(var C=0,T=q.length;C<T;++C)n(S=q.charAt(C))?f.push(w.length):b=!0,w.push(["text",S,x,x+1]),x+=1,"\n"===S&&k();if(!R.scan(a))break;if(g=!0,_=R.scan(v)||"name",R.scan(p),"="===_?(q=R.scanUntil(h),R.scan(h),R.scanUntil(o)):"{"===_?(q=R.scanUntil(c),R.scan(m),R.scanUntil(o),_="&"):q=R.scanUntil(o),!R.scan(o))throw new Error("Unclosed tag at "+R.pos);if($=[_,q,x,R.pos],w.push($),"#"===_||"^"===_)r.push($);else if("/"===_){if(!(P=r.pop()))throw new Error('Unopened section "'+q+'" at '+x);if(P[1]!==q)throw new Error('Unclosed section "'+P[1]+'" at '+x)}else"name"===_||"{"===_||"&"===_?b=!0:"="===_&&y(q)}if(P=r.pop())throw new Error('Unclosed section "'+P[1]+'" at '+R.pos);return function(e){for(var t,l=[],i=l,s=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":i.push(t),s.push(t),i=t[4]=[];break;case"/":s.pop()[5]=t[2],i=s.length>0?s[s.length-1][4]:l;break;default:i.push(t)}return l}(function(e){for(var t,l,i=[],s=0,a=e.length;s<a;++s)(t=e[s])&&("text"===t[0]&&l&&"text"===l[0]?(l[1]+=t[1],l[3]=t[3]):(i.push(t),l=t));return i}(w))}(t,i)),o},f.prototype.render=function(e,t,l){var i=this.parse(e),s=t instanceof w?t:new w(t);return this.renderTokens(i,s,l,e)},f.prototype.renderTokens=function(e,t,l,i){for(var s,a,o,c="",n=0,r=e.length;n<r;++n)o=void 0,"#"===(a=(s=e[n])[0])?o=this.renderSection(s,t,l,i):"^"===a?o=this.renderInverted(s,t,l,i):">"===a?o=this.renderPartial(s,t,l,i):"&"===a?o=this.unescapedValue(s,t):"name"===a?o=this.escapedValue(s,t):"text"===a&&(o=this.rawValue(s)),void 0!==o&&(c+=o);return c},f.prototype.renderSection=function(e,t,s,a){var o="",c=t.lookup(e[1]);if(c){if(l(c))for(var n=0,r=c.length;n<r;++n)o+=this.renderTokens(e[4],t.push(c[n]),s,a);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)o+=this.renderTokens(e[4],t.push(c),s,a);else if(i(c)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(t.view,a.slice(e[3],e[5]),function(e){return plself.render(e,t,s)}))&&(o+=c)}else o+=this.renderTokens(e[4],t,s,a);return o}},f.prototype.renderInverted=function(e,t,i,s){var a=t.lookup(e[1]);if(!a||l(a)&&0===a.length)return this.renderTokens(e[4],t,i,s)},f.prototype.renderPartial=function(e,t,l){if(l){var s=i(l)?l(e[1]):l[e[1]];return null!=s?this.renderTokens(this.parse(s),t,l,s):void 0}},f.prototype.unescapedValue=function(e,t){var l=t.lookup(e[1]);if(null!=l)return l},f.prototype.escapedValue=function(t,l){var i=l.lookup(t[1]);if(null!=i)return e.escape(i)},f.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var g=new f;e.clearCache=function(){return g.clearCache()},e.parse=function(e,t){return g.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(l(s=e)?"array":typeof s)+'" was given as the first argument for mustache#render(template, view, partials)');var s;return g.render(e,t,i)},e.to_html=function(t,l,s,a){var o=e.render(t,l,s);if(!i(a))return o;a(o)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return r[e]})},e.Scanner=u,e.Context=w,e.Writer=f});var PointslocalEventsSearch=function(e){var t=e.url+"?search="+e.text;document.location.href=t},PointslocalListeners=function(e,t){"search"==t&&$(e).find(".plw-events-search-button").on("click",function(){var t=$(e).find(".plw-events-search-text").val(),l=$(e).find(".plw-events-search-text").attr("data-url");PointslocalEventsSearch({url:l,text:t})})},PointslocalTemplates=function(){this.templates={"pointslocal.search":'<div class="plw-item plw-search"><div class="plw-cell plw-cell--1-col-tablet plw-cell--2-col-tablet plw-cell--3-col"><div class=plw-pseudo-drop><div class=plw-pseudo-drop-inner id=plw-pseudo-drop-what><span>What</span> <i class=plw-cell--hide-phone>{{{icon:chevron}}}</i></div><div class=plw-pseudo-drop-options><ul>{{#categories}}<li data-attribute=category_id data-label={{event_category_name}} data-label-target=what data-search-options=categories data-value={{event_category_id}}>{{event_category_name}}</li>{{/categories}}</ul></div></div></div><div class="plw-cell plw-cell--1-col-tablet plw-cell--2-col-tablet plw-cell--3-col"><div class=plw-pseudo-drop><div class=plw-pseudo-drop-inner id=plw-pseudo-drop-where><span>Where</span> <i class=plw-cell--hide-phone>{{{icon:chevron}}}</i></div><div class=plw-pseudo-drop-options><ul>{{#neighborhoods}}<li data-attribute=neighborhood_id data-label={{neighborhood_name}} data-label-target=where data-search-options=neighborhoods data-value={{neighborhood_id}}>{{neighborhood_name}}</li>{{/neighborhoods}}</ul></div></div></div><div class="plw-cell plw-cell--2-col-tablet plw-cell--3-col plw-cell--hide-phone"><div class=plw-pseudo-drop><div class=plw-pseudo-drop-inner id=plw-pseudo-drop-when><span>When</span> <i class=plw-cell--hide-phone>{{{icon:chevron}}}</i></div><div class=plw-pseudo-drop-options><ul>{{#dates}}<li data-attribute=date data-label={{date_name}} data-label-target=when data-search-options=range data-value={{date_value}}>{{date_name}}</li>{{/dates}}</ul></div></div></div><div class="plw-cell plw-cell--1-col-tablet plw-cell--2-col-tablet plw-cell--2-col"><input class=plw-textbox id=plw-search-text placeholder=Search></div><div class="plw-cell plw-cell--1-col-tablet plw-cell--1-col plw-cell--1-col-phone"><a class=plw-button id=plw-search-init><i class="plw-icon search"></i></a></div></div><div class="widget-search-preview"><div class=plw-grid>{{#events}}<div class="plw-cell plw-cell--4-col-phone plw-cell--3-col plw-cell--4-col-tablet">{{#image_id}}<img src="https://imagecdn.pointslocal.com/image?method=image.icrop&context=event.yield&w=350&h=200&id={{parent_id}}&trim=1&cf=true&site={{sitecode}}&q=50" style="max-width:100%"">{{/image_id}}<div><a href="http://{{url}}/{{path}}/{{guid}}">{{title}}</a></div></div>{{/events}}</div></div>',"pointslocal.search.mini":'<div class="{{container_class}} pointslocal-search-mini-{{sitecode}} {{domain}}"><a href="http://{{#contextURL}}{{contextURL}}{{/contextURL}}{{^contextURL}}{{produrl}}{{/contextURL}}"><h3 class="plw-header">{{title}}</h3></a><div class=plw-grid><div class="plw-cell plw-cell--9-col"><input class="plw-textbox plw-events-search-text" data-url="http://{{endpoint}}/events"  placeholder="Search events "></div><div class="plw-cell plw-cell--3-col"><a class="plw-button plw-events-search-button" id="plw-events-search-button">{{{icon:search}}}</a></div></div><div class="pointslocal-add-event"><a href="https://{{ugc_url}}/new-create">Add Event</a></div>{{#events}}<div class=plw-grid><div class="plw-cell plw-cell--5-col"><img src="https://imagecdn.pointslocal.com/image?method=image.icrop&context=event.yield&w=250&h=-1&id={{parent_id}}&trim=1&cf=true&site={{sitecode}}&q=50"></div><div class="plw-cell plw-cell--7-col"><a class="plw-item-title" href="http://{{url}}/{{path}}/{{guid}}">{{title}}</a><div class="plw-metadata">{{date}}, <span class="plw-metadata-time">{{start_time}}</span></div></div></div>{{/events}} <div style="padding: 4px;font-size: 12px;padding-right:16px;padding-bottom:16px;text-align:right;">{{&branding}}</a></div>',"pointslocal.search.results":'<div class=plw-item>{{#items}}<div class=plw-cell style=min-height:200px><div class=plw-cell-item>{{#image_id}}<div><img src="<img src="https://imagecdn.pointslocal.com/image?method=image.icrop&context=event.yield&w=200&h=200&id={{parent_id}}&trim=1&cf=true&site={{sitecode}}&q=50"style=max-width:100%>"></div>{{/image_id}}</div><div class="plw-item-card plw-item-card-mini"><a class=plw-item-title> href="http://{{url}}/{{path}}/{{guid}}"{{title}}</a><div>{{date}}, {{start_time}}</div></div></div>{{/items}}</div>',"pointslocal.upcoming":'{{#items}}{{#title}}<div class=plw-item>{{#image_id}}<div class="plw-cell plw-cell--4-col"><img src="https://imagecdn.pointslocal.com/image?method=image.icrop&context=event.yield&w=100&h=100&id={{parent_id}}&trim=1&cf=true&site={{sitecode}}&q=50"style=max-width:100%></div>{{/image_id}}<div class="plw-cell plw-cell--8-col"><a class=plw-item-title href="http://{{url}}/{{path}}/{{guid}}">{{title}}</a><div class=plw-item-meta>{{date}}, {{start_time}}</div></div></div>{{/title}}{{/items}}',"pointslocal.upcoming.medium":'{{#items}}<div class=plw-item>{{#image_id}}<div class="plw-cell plw-cell--3-col"><img src="https://imagecdn.pointslocal.com/image?method=image.icrop&context=event.yield&w=200&h=200&id={{parent_id}}&trim=1&cf=true&site={{sitecode}}&q=50"style=max-width:100%></div>{{/image_id}}<div class="plw-cell plw-cell--9-col"><div class=plw-ribbon-container><div class="pick plw-ribbon">EDITOR\'S PICK</div></div><a class=plw-item-title href=http://{{url}}/{{path}}/{{guid}}/{{path}}/{{guid}}>{{title}}</a><div class=plw-item-meta>{{date}}, {{start_time}}</div><p>{{print_description}}</div></div>{{/items}}',"pointslocal.upcoming.large":'{{#items}}<div class=plw-row><div class=plw-ribbon-container><div class=plw-ribbon>FEATURED</div></div>{{#image_id}}<div class="plw-cell plw-cell--12-col"><img src="https://imagecdn.pointslocal.com/image?method=image.icrop&context=event.yield&w=400&h=400&id={{parent_id}}&trim=1&cf=true&site={{sitecode}}&q=50"style=max-width:100%></div>{{/image_id}}<div class=plw-item-card><a class=plw-item-title href="http://{{url}}/{{path}}/{{guid}}">{{title}}</a> @ {{venue_name}}<div>{{date}}, {{start_time}}</div></div></div>{{/items}}',"gameplan.scoreboard.mini":'<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"><\/script><div class="plw-row plw-gp-scoreboard plw-search"><div class="plw-cell plw-gp-header plw-cell--9-col">Scoreboard</div><div class="plw-cell plw-gp-header plw-cell--3-col"><div class=plw-pseudo-drop><div class=plw-pseudo-drop-inner>Sport <i><svg height=16 viewBox="0 0 1792 1792"width=16 xmlns=http://www.w3.org/2000/svg><path d="M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"></path></svg></i></div><div class=plw-pseudo-drop-options><ul>{{#sports}}<li data-attribute=sport data-value={{sport_guid}}>{{sport_name}}</li>{{/sports}}</ul></div></div><div class=plw-pseudo-drop><div class="plw-pseudo-drop-inner plw-pseudo-drop-datepicker-init">Date <i><svg height=16 viewBox="0 0 1792 1792"width=16 xmlns=http://www.w3.org/2000/svg><path d="M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"></path></svg></i></div><div class=plw-pseudo-drop-options style=width:400%;left:-300%><div data-attribute=sport data-value=""><div class=datepicker></div></div></div></div></div></div><div class=plw-row>{{^items}}<div class="plw-cell plw-cell--12-col">No Games Matched This Request</div>{{/items}}{{#items}}<div class="plw-cell plw-cell--4-col"><div class=plw-row><div class="plw-cell plw-cell--8-col">{{#away:has:image}}<img src="http://omaha.pointslocal.com/image?method=image.icrop&context=stats.image&id={{event_away_stats_entity_id}}&w=20&h=20"style=vertical-align:bottom>{{/away:has:image}}<a href=#>{{away_name}}</a> @</div><div class="plw-cell plw-cell--4-col">{{away_score}}</div></div><div class=plw-row><div class="plw-cell plw-cell--8-col">{{#home:has:image}}<img src="http://omaha.pointslocal.com/image?method=image.icrop&context=stats.image&id={{event_home_stats_entity_id}}&w=20&h=20"style=vertical-align:bottom>{{/home:has:image}} <a href=#>{{home_name}}</a></div><div class="plw-cell plw-cell--4-col">{{home_score}}</div></div><div class=plw-row><div class="plw-cell plw-cell--8-col"><span class=plw-gp-date>{{date}} @ {{time}}</span></div></div></div>{{/items}}</div><div class="plw-row plw-row--center"><div class="plw-cell plw-cell--6-col"><svg height=16 viewBox="0 0 1792 1792"width=16 xmlns=http://www.w3.org/2000/svg class="plw-control plw-control-prev"><path d="M1427 301l-531 531 531 531q19 19 19 45t-19 45l-166 166q-19 19-45 19t-45-19l-742-742q-19-19-19-45t19-45l742-742q19-19 45-19t45 19l166 166q19 19 19 45t-19 45z"></path></svg></div><div class="plw-cell plw-cell--6-col plw-navigate-next"><svg height=16 viewBox="0 0 1792 1792"width=16 xmlns=http://www.w3.org/2000/svg class="plw-control plw-control-next"style=float:right><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"></path></svg></div></div>',"gameplan.scoreboard.extended":'{{#sports}}<div class="plw-row plw-gp-scoreboard plw-search"><div class="plw-cell plw-cell--12-col plw-gp-header">{{sport_name}}</div></div>{{^games}}<div class=plw-row><div class="plw-cell plw-cell--12-col">No games</div></div>{{/games}} {{#games}}<div class=plw-gp-scoreboard-game><div class=plw-row><div class="plw-cell plw-cell--10-col"><a href=#>{{away_name}}</a></div><div class="plw-cell plw-cell--2-col">{{away_score}}</div></div><div class=plw-row><div class="plw-cell plw-cell--10-col">@ <a href=#>{{home_name}}</a></div><div class="plw-cell plw-cell--2-col">{{home_score}}</div></div></div>{{/games}} {{/sports}}',"gameplan.team":'<div class="plw-gp plw-gp-team-card">{{#items}}<div class=plw-row><div class=plw-cell--4-col><img src="{{site}}/image?method=image.icrop&context=stats.image&id={{id}}&w=200&h=200"></div><div class=plw-cell--8-col><h2 class=plw-gp-team-header>{{name}}</h2><div class=plw-gp-team-card-team-page><a href="">Visit Team Page</a></div>{{#last_game}}<div class=plw-gp-team-card-game><b>Last Game:</b> {{title}}</div>{{/last_game}} {{#next_game}}<div class=plw-gp-team-card-game><b>Next Game:</b> {{title}}, {{date}} @ {{time}}</div>{{/next_game}}</div></div>{{/items}}</div>'}},PointslocalIcons=function(){this.fill="#ffffff",this.chevron=function(){return'<svg width="16" height="16" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"/></svg>'},this.microphone=function(){return'<svg width="16" height="16" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1472 704v128q0 221-147.5 384.5t-364.5 187.5v132h256q26 0 45 19t19 45-19 45-45 19h-640q-26 0-45-19t-19-45 19-45 45-19h256v-132q-217-24-364.5-187.5t-147.5-384.5v-128q0-26 19-45t45-19 45 19 19 45v128q0 185 131.5 316.5t316.5 131.5 316.5-131.5 131.5-316.5v-128q0-26 19-45t45-19 45 19 19 45zm-256-384v512q0 132-94 226t-226 94-226-94-94-226v-512q0-132 94-226t226-94 226 94 94 226z"/></svg>'},this.search=function(){return'<svg width="16" height="16" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path style="fill:'+this.fill+'" d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>'}},Pointslocal=function(e,t,l){this.activeSites={sfgate:{domain:"https://imagecdn.pointslocal.com"}},this.jQ,this.cdn=!1,this.site="",this.endpoint="",this.type="",this.element="",this.template="",this.rendered="",this.templateSelector=!1,this.truncateTitleCharacters=!1,this.opts=[],this.vars,this.template,this.templateSet,this.maxMobileItems,this.maxItemsCSS="",this.endpoint="",this.searchRequest={categories:"",neighborhoods:"",range:"",search:""},this.APIParams=["count","id","guid","recurring","venue","date","range","start","end","image"],plself=this,this.resolveProdURL=function(e){switch(url="",e){case"sfgate":url="thepress.pointslocal.com";break;case"icflorida":url="events.icflorida.com";break;case"gocarolinas":url="events.gocarolinas.com";break;case"lakana-uat":case"lakana-sandbox":url="beta.gocarolinas.com";break;case"akron":url="events.ohio.com";break;case"nycnow":url="www.nycnow.com";break;default:url="events."+e+".com"}return url},this.resolvePath=function(e){switch(path="events",e){case"sfgate":path="wine-events";break;default:path="events"}return path},this.resolveDomain=function(){var e="",t="",l=document.domain,i="",s=l.split(".");switch(s.length>2&&(l=s.slice(1).join(".")),l){case"sfgate.com":e="sfgate",t="imagecdn.pointslocal.com",i="sfgate-secure.pointslocal.com";break;case"seattlepi.com":e="seattlepi",t="imagecdn.pointslocal.com",i="seattle-secure.pointslocal.com";break;case"ctpost.com":e="ctpost",t="imagecdn.pointslocal.com",i="ct-secure.pointslocal.com";break;case"chron.com":case"yourhoustonnews.com":case"yourconroenews.com":e="chron",t="imagecdn.pointslocal.com",i="chron-secure.pointslocal.com";break;case"beaumontenterprise.com":e="beaumontenterprise",t="imagecdn.pointslocal.com",i="beaumont-secure.pointslocal.com";break;case"timesunion.com":e="timesunion",t="imagecdn.pointslocal.com",i="albany-secure.pointslocal.com";break;case"newstimes.com":e="newstimes",t="imagecdn.pointslocal.com",i="ct-secure.pointslocal.com";break;case"greenwichtime.com":e="greenwichtime",t="imagecdn.pointslocal.com",i="ct-secure.pointslocal.com";break;case"stamfordadvocate.com":e="stamfordadvocate",t="imagecdn.pointslocal.com",i="ct-secure.pointslocal.com";break;case"mysanantonio.com":e="mysanantonio",t="imagecdn.pointslocal.com",i="mysanantonio-secure.pointslocal.com";break;case"icflorida.com":e="icflorida",t="imagecdn.pointslocal.com",i="icflorida-secure.pointslocal.com";break;case"gocarolinas.com":case"cmg-web.lakana-sandbox.com":case"cmg-web.lakana-uat.com":e="gocarolinas",t="imagecdn.pointslocal.com",i="gocarolinas-secure.pointslocal.com";break;case"ohio.com":e="akron",t="imagecdn.pointslocal.com",i="akron-community.pointslocal.com/community/authenticate#";break;case"nycnow.com":e="nycnow",t="imagecdn.pointslocal.com",i="nyc-secure.pointslocal.com/community/authenticate#";break;default:e=""}return{site:e,url:t,ugc:i,domain:l}},this.construct=function(e){if(this.jQ=$,this.templateSet=new PointslocalTemplates,e.template&&(this.template=this.templateSet.templates[e.template]),e.vars&&(this.vars=e.vars),e.cloud=1,e.stylesheet){var t=document.createElement("link");t.href="https://dist.pointslocal.com/pointslocal."+e.stylesheet+".css",t.type="text/css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t)}e.site||(e.site=plself.resolveDomain().site,e.cdn=!0),e.url=plself.resolveProdURL(e.site),this.ugc_url=plself.resolveDomain().ugc,this.endpoint=e.url,this.domain=plself.resolveDomain().domain.replace(/[^a-z]+/gi,""),this.path=plself.resolvePath(e.site);for(k in e)"template"!==k&&(this[k]=e[k],this.opts[k]=e[k]);this.templateSelector&&this.templateFromSelector(),"search"===this.widget&&(this.type="search"),this.iconSet=new PointslocalIcons,this._PLGet()},this.ping=function(){},this.templateFromSelector=function(){this.template=$(plself.templateSelector).html()},this.constructRequest=function(e,t,l){if(plself.cdn)l=btoa(JSON.stringify(l)),req="https://cloudy.pointslocal.com/cloudy/"+e+"/api/v1/"+t+"/"+l;else{o=[];for(k in l)o.push(k+"="+l[k]);req="https://"+e+".pointslocal.com/api/v1/"+t+"?"+o.join("&")+"&callback=?"}return req},this._PL_Render=function(e,t){plself.rendered=Mustache.render(e.template,t),$(e.element).html(plself.rendered),$(e.element).html(),$(e.element).find(".plw-pseudo-drop-options li").on("click",function(){var t=$(this).attr("data-attribute"),l=$(this).attr("data-value");e.opts[t]=l;var i=$(this).attr("data-label-target");$("#plw-pseudo-drop-"+i).find("span").html($(this).attr("data-label")),$(this).parent().parent().parent().find(".plw-pseudo-drop-inner").removeClass("active");var s=$(this).attr("data-search-options");e.searchRequest[s]=$(this).attr("data-value")}),$(e.element).find("#plw-search-init").on("click",function(){e.searchRequest.search=$(this).parent().parent().find("#plw-search-text").val();var t=[],l="https://"+e.endpoint+"/events?";for(k in e.searchRequest)t.push(k+"="+e.searchRequest[k]);var i=l+(t=t.join("&"));document.location.href=i}),$(e.element).find(".plw-control-next").on("click",function(){e.opts.offset=e.opts.offset+e.opts.count,e._PLGet()}),$(e.element).find(".plw-control-prev").on("click",function(){e.opts.offset=e.opts.offset-e.opts.count,e._PLGet()}),$(e.element).find(".plw-pseudo-drop-inner").on("click",function(){var e=!$(this).hasClass("active");$(".plw-pseudo-drop-inner").removeClass("active"),e&&$(this).addClass("active")}),PointslocalListeners(e.element,e.type),$(e.element).find(".plw-pseudo-drop-datepicker-init").on("click",function(){$(".datepicker").datepicker({autoClose:!0,onSelect:function(t){$(".active").removeClass("active"),e.opts.date=t,e._PLGet()}})}),e.cb&&setTimeout(e.cb(e),1)},this._PLGet=function(){var e=[];this.opts.date_format||(this.opts.date_format="F j, Y"),this.opts.featured&&1==this.opts.featured&&(this.opts.featured="1x");for(k in this.opts)"templateSelector"!=k&&"template"!==k&&"chunk"!==k&&"truncateTitleCharacters"!=k&&e.push(k+"="+this.opts[k]);plself.type&&""!==plself.type||(plself.type="events"),this.opts.callback="bar";var t,l=plself.constructRequest(this.site,this.type,this.opts);$.getJSON(l,(t=this,function(e){for(dk in plself.vars)e[dk]=plself.vars[dk];if(e.contextURL=plself.contextURL||!1,e["icon:chevron"]=plself.iconSet.chevron(),e["icon:microphone"]=plself.iconSet.microphone(),e["icon:search"]=plself.iconSet.search(),e.url=plself.url,e.endpoint=plself.endpoint,e.sitecode=plself.site,e.domain=plself.domain,e.ugc_url=plself.ugc_url,e.produrl=plself.url,e.branding='powered by <a href="http://corporate.pointslocal.com">pointslocal</a>',plself.chunk&&plself.chunk.length>0)for(k in plself.chunk){key=plself.chunk[k].field,newKey=key+":",tmp=arrChunk(e[key],plself.chunk[k].groups),e[newKey+"groups"]=[];for(var l=0;l<tmp.length;l++)e[newKey+(l+1)]=tmp[l],e[newKey+"groups"].push(tmp[l])}if(e.items){l=1;for(k in e.items)e.items[k].site="http://"+plself.site+".pointslocal.com",e.items[k].sitecode=plself.site,e.items[k].url=plself.url,e.items[k].endpoint=plself.endpoint,e.items[k]._classname="",l>plself.maxMobileItems&&(e.items[k]._classname=plself.maxItemsCSS),l++}if(plself.companion){var i=[];plself.companion.options.featured&&1==plself.companion.options.featured&&(plself.companion.options.featured="1x");for(k in plself.companion.options)i.push(k+"="+plself.companion.options[k]);i=btoa(JSON.stringify(plself.companion.options));var s=plself.constructRequest(plself.site,plself.companion.widget,plself.companion.options);$.getJSON(s,function(l){for(ck in l.items)l.items[ck].site="http://"+plself.site+".pointslocal.com",l.items[ck].sitecode=plself.site,l.items[ck].url=plself.url,l.items[ck].endpoint=plself.endpoint,plself.truncateTitleCharacters&&plself.truncateTitleCharacters>0&&(l.items[ck].title="!!~"+l.items[ck].title.substring(0,plself.truncateTitleCharacters));e.path=plself.path||"events",e[plself.companion.key]=l.items,plself._PL_Render(t,e)})}else plself._PL_Render(t,e)}))},plself.cb=l,plself.element=e,$(e).widget=self,this.construct(t)};
